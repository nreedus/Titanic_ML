---
title: "Titanic"
author: "Narcel Reedus"
date: "September 14, 2017"
output: github_document
keep_md: TRUE
---

# Summary

The maiden voyage of the Titanic; made popular by James Cameron's epic 1997 film, is one of the most infamous tragedies in human history. The "unsinkable" oceanliner struck an iceberg and sank to the bottom of the Atlantic killing 1,502 of its 2,224 passengers and crew.

Today, with the help of the ship's manifest, data analysts and data scientists from around the globe are able to discover numerous insights by appyling machine learning algorithms to predict who lived and who ultimately died onboard the RMS Titanic.

My goal here is to use feature engineering to viusalize the distinguishing factors between the passengers more likely to survive the shipwreck from those who ultimately perished.

# Analysis

Load dplyr and stringr libraries
```{r Load libraries}
library(dplyr)
library(stringr)
library(printr)
library(pander)
library(knitr)
library(httpuv)
library(caTools)
```
The first step is to become intimately familiar with the data. Even though there are only 891 observations and 12 variables, there are many insights hidden within each data point. 

We begin by loading the titanic_train.csv data. Assign dataset to train. View data and view the structure of the data with str.

```{r}
titanic_train <- read.csv("C:/Users/narce/OneDrive/Documents/GitHub/Titanic/titanic_train.csv")
train <- titanic_train
View(train)
str(train)
```

# Variables

**PassengerID**

The PassengerID varible simply counts the number of observations and in not other way directly connects to actual passengers onboard the Titanic. I will not use the PassengerID in this project.

**Survived**

Survived is a binary variable and equates to whether the passenger survived or perished. Survived is hugely important and will serve as as our dependent variable.

**Pclass**

The Pclass variable translate well as a look into the socio-economic status of each passenger. 1 = first class or Upper deck, 2 = second class or Middle deck, and 3 = third class or lower deck. I will certainly take advange of this independent variable classification as I build new features.

**Name**

Name is a string variable that presents this dataset with a bit of a challenge. There are a number of titles included within the name variable that we can extract and attempt to assign to gender. For instance, Jonkheer is an adult male but Miss is used to describe unwed adult women and female children. 

**Sex**

The Sex Variable translates to gender.

**Age**

The Age variable is important but the Age value is missing for several passengers. I will impute the Age for the missing values.

**SibSp**

SipSp lumps siblings (brother, sister, stepbrother, stepsister) together with Spouses (husbands and wives)

**Parch**

The Parch variable combines Parents travelling with children.

**Ticket**

The ticket variable provides a ticket number. However, some passengers do not have a ticket number or share a ticket number with their family.

**Fare**

The Fare variable relates to the price passengers' paid to travel on the Titanic. There are a number of passengers that did not pay a Fare.   

**Cabin**

The cabin variable has a lot of missing values and may not play an inportant role in this analysis.

**Embarked**

The Embarked variable correlates to where passengers bordered the ship: C = Cherbourg, Q = Queenstown, S = Southampton

============================================================

There are a number of passengers that appear to not have paid a fare. I filter the Fare variable for 0.0 to take a closer look at this anomaly. I assign the results to zero.fare


```{r zero fare}
zero.fare <- train %>%
  filter(Fare == 0.0)
zero.fare
```

I take the zero.fare anomaly a step further by grouping zero.class by Pclass and then summarizing. The results are six passengers in first class, five passengers in first class, four passengers in third class paid zero fare.



```{r zero fare by Pclass}
zero.fare.pclass <- zero.fare %>%
  group_by(Pclass) %>%
  summarize(Total = n()) %>%
  arrange(desc(Total))
zero.fare.pclass
```

The next phase of this analysis to the get a better understanding of the survivors by gender, denoted here as Sex. My first step is to seperate adult males and females from the male and female adolecents on the ship. I used regex function str_extract to extract passengers by title (Mr. Mrs. Miss. Rev...) by locating the word just before the (.) period in the Name variable and then create a new feature called Title. 

```{r extract title}
train <- train %>%
mutate(Title = str_extract(Name, "[a-zA-Z0-9]+\\."))
table(train$Title)
```

Now I create a new data.frame (titles.lookup) that contains the title variable and a New.Title variable condensed by gender (Mr. Mrs. Miss, and Master). My goal is to line up the adult male titles to Mr., married adult female titles to Mrs., adolescent females and unwed adult females as Miss., and adolescent boys as Master.

```{r lookup table}
titles.lookup <- data.frame(Title = c("Mr.", "Capt.", "Col.", "Don.", "Dr.", 
                                      "Jonkheer.", "Major", "Rev.", "Sir", 
                                      "Mrs.", "Dana.", "Lady.", "Mme.", 
                                      "Countess.", "Miss.", "Mlle.", "Ms.", 
                                      "Master."), 
                            New.Title = c(rep("Mr.", 9),
                                          rep("Mrs.", 5),
                                          rep("Miss.", 3),
                                          "Master."),
                            stringsAsFactors = FALSE)
View(titles.lookup)
knitr::kable(titles.lookup)
```


